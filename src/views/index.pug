//- Main status page template.
//- Follows IsSeptaFcked views/index.pug pattern: bold status display with
//- dynamic CSS class, metrics, and timestamp.
extends layouts/main

block content
  .status-container
    h1.site-title Ist BVG gefickt?

    //- Bold status display with dynamic CSS class
    .status(class=statusClass)
      span.status-emoji= emoji
      .status-text= message

    //- Transit boxes showing disruptions by type
    if transitBoxes
      .transit-boxes
        .transit-box(data-type='bus')
          h3 Bus
          div
            span Versp채tet:
            span.count= transitBoxes.bus.delayed
          div
            span Ausgefallen:
            span.count= transitBoxes.bus.cancelled

        .transit-box(data-type='ubahn')
          h3 U-Bahn
          div
            span Versp채tet:
            span.count= transitBoxes.ubahn.delayed
          div
            span Ausgefallen:
            span.count= transitBoxes.ubahn.cancelled

        .transit-box(data-type='tram')
          h3 Tram
          div
            span Versp채tet:
            span.count= transitBoxes.tram.delayed
          div
            span Ausgefallen:
            span.count= transitBoxes.tram.cancelled

        .transit-box(data-type='sbahn')
          h3 S-Bahn
          div
            span Versp채tet:
            span.count= transitBoxes.sbahn.delayed
          div
            span Ausgefallen:
            span.count= transitBoxes.sbahn.cancelled

    //- Metrics section
    if metrics && metrics.totalServices > 0
      .metrics
        .metric
          span.metric-value= metrics.percentDelayed + '%'
          span.metric-label  verspaetet
        .metric
          span.metric-value= metrics.percentCancelled + '%'
          span.metric-label  ausgefallen
        .metric
          span.metric-value= metrics.totalServices
          span.metric-label  Abfahrten

    //- Staleness warning
    if stale
      .stale-warning Daten sind veraltet.

    //- Timestamp and auto-refresh indicator
    .footer-info
      if timestamp
        .timestamp Zuletzt aktualisiert: #{timestamp}
      .refresh-indicator Automatische Aktualisierung alle 60 Sekunden
